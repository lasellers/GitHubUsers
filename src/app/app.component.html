<div class="container-fluid">
  <h1 highlight>
    {{title}}
  </h1>
  <div class="">

    <p class="lead">Learning Angular 9 using the GitHub API (v {{version}})</p>

    <div class="row">
      <div class="col-sm-5 align-bottom">

        <form>
          <p>
            https://github.com/<input #usernameInput type="text" name="baseUsername" [(ngModel)]="baseUsername"
                                      value="{{baseUsername}}">
            <button class="btn btn-primary btn-sm" (click)="changeBaseUsername(usernameInput.value)"
                    placement="left"
                    ngbTooltip="Change base user">User
            </button>
          </p>
        </form>

      </div>
      <div class="col-sm-3 align-bottom">
        <button class="btn btn-primary btn-sm" (click)="changeBaseUsernameToDefault()" placement="top"
                ngbTooltip="Change to Default User">Change to Default User
        </button>
      </div>
      <div class="col-sm-2 align-bottom">
        Caching <input type="checkbox" [(ngModel)]="isCaching" (change)="changeCaching(isCaching)">
      </div>
      <div class="col-sm-2 align-bottom">
        <button (click)="clearCache()">Clear cache</button>
      </div>
    </div>
    <!-- /row -->

    <div class="row">

      <div class="col-sm-4">
        <div appWasCachedHighlight [wasCached]="cachingStatus.userWasCached" [classString]="'text-danger'">
          <!--[ngClass]="{'text-info': cachingStatus.userWasCached, 'text-warning': !cachingStatus.userWasCached}"-->
          User {{ cachingStatus.userWasCached | wasCached}}
          <fa-icon [icon]="['fas','cloud']" *ngIf="userService.isUserCached(baseUsername)"
                   placement="left"
                   ngbTooltip="User is cached"></fa-icon>
          <fa-icon [icon]="['fas','cloud-download-alt']" *ngIf="cachingStatus.userWasCached"
                   placement="left"
                   ngbTooltip="Gist was cached"></fa-icon>
          <fa-icon [icon]="['fas','minus-circle']"
                   (click)="userService.clearUserCache()" placement="left"
                   ngbTooltip="Clear user cache"></fa-icon>
        </div>
        <user-detail [baseUsername]="baseUsername"
                     (notifyBaseUsername)='onBaseUsername($event)'></user-detail>
      </div>

      <div class="col-sm-4">
        <div appWasCachedHighlight [wasCached]="cachingStatus.followersWasCached">
          Followers {{ cachingStatus.followersWasCached | wasCached}}
          <fa-icon [icon]="['fas','cloud']" *ngIf="userService.isFollowersCached(baseUsername)"
                   placement="left"
                   ngbTooltip="Followers is cached {{gist.id}}"></fa-icon>
          <fa-icon [icon]="['fas','cloud-download-alt']" *ngIf="cachingStatus.followersWasCached"
                   placement="left"
                   ngbTooltip="Followers was cached {{gist.id}}"></fa-icon>
          <fa-icon [icon]="['fas','minus-circle']"
                   (click)="userService.clearFollowersCache()" placement="left"
                   ngbTooltip="Clear followers cache"></fa-icon>
        </div>
        <app-user-followers [baseUsername]="baseUsername"
                            (notifyBaseUsername)='onBaseUsername($event)'></app-user-followers>
      </div>

      <div class="col-sm-4">
        <div appWasCachedHighlight [wasCached]="cachingStatus.followingsWasCached">
          Followings  {{ cachingStatus.followingsWasCached | wasCached}}
          <fa-icon [icon]="['fas','cloud']" *ngIf="userService.isFollowersCached(baseUsername)"
                   placement="left"
                   ngbTooltip="Followings is cached"></fa-icon>
          <fa-icon [icon]="['fas','cloud-download-alt']" *ngIf="cachingStatus.followingsWasCached"
                   placement="left"
                   ngbTooltip="Followings was cached"></fa-icon>
          <fa-icon [icon]="['fas','minus-circle']"
                   (click)="userService.clearFollowingsCache()" placement="left"
                   ngbTooltip="Clear followings cache"></fa-icon>
        </div>
        <app-user-followings [baseUsername]="baseUsername"
                             (notifyBaseUsername)='onBaseUsername($event)'></app-user-followings>
      </div>

    </div>
    <!-- /row -->

    <div class="row">
      <div class="col-sm-6">

        <div appWasCachedHighlight [wasCached]="cachingStatus.gistsWasCached">
          Gists {{ cachingStatus.gistsWasCached | wasCached}}
          <fa-icon [icon]="['fas','cloud']" *ngIf="userService.isGistsCached(baseUsername)"
                   placement="left"
                   ngbTooltip="Gist is cached {{gist.id}}"></fa-icon>
          <fa-icon [icon]="['fas','cloud-download-alt']" *ngIf="cachingStatus.gistsWasCached"
                   placement="left"
                   ngbTooltip="Gist was cached {{gist.id}}"></fa-icon>
          <fa-icon [icon]="['fas','minus-circle']"
                   (click)="userService.clearGistsCache()" placement="left"
                   ngbTooltip="Clear gists cache"></fa-icon>
        </div>
        <app-user-gists [baseUsername]="baseUsername"></app-user-gists>

      </div>
      <div class="col-sm-6">

        <div>
          Gist {{ cachingStatus.gistWasCached | wasCached}}
          <fa-icon [icon]="['fas','minus-circle']" *ngIf="userService.isGistsCached(baseUsername)"
                   (click)="userService.clearGistCache(gist)" placement="left"
                   ngbTooltip="Clear gist cache"></fa-icon>
        </div>

        <app-gist></app-gist>
      </div>
    </div>
    <!-- /row -->

  </div>
</div>
<!-- /fluid-container -->

<footer class="footer">
  <div class="container">

    <div class="row">

      <div class="col-3">
        <a class="" href="https://github.com/lasellers">https://github.com/lasellers</a>
      </div>
      <div class="col-3">
        <a class="" href="https://github.com/{{baseUsername}}">https://github.com/{{baseUsername}}</a>
      </div>
      <div class="col-6">
      </div>

    </div>

    <div class="muted-text">
      See README.md
    </div>

  </div>
</footer>
