<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#"><h1>{{title}}</h1></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
    </ul>
    <div class="lead">Learning Angular 9 using the GitHub API (v {{version}})</div>
  </div>
</nav>

<mat-divider [inset]="true"></mat-divider>

<mat-accordion class="example-headers-align">

  <mat-expansion-panel [expanded]="panel === 0" (opened)="setPanel(0)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Search
      </mat-panel-title>
      <mat-panel-description>
        Search Users
        <mat-icon>account_circle</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-action-row>

      <form class="">
        https://github.com/
        <input class="mat-input-element"
               type="search"
               placeholder="Search"
               aria-label="Search"
               #usernameInput
               name="baseUsername"
               [(ngModel)]="baseUsername"
               value="{{baseUsername}}">
        <button mat-raised-button color="primary" type="submit"
                (click)="onSwitchToUser(usernameInput.value)"
                placement="bottom"
                ngbTooltip="Change user">User
        </button>
      </form>

      <button mat-raised-button color="primary"
              (click)="switchToUserDefault()"
              placement="bottom"
              ngbTooltip="Change to Default User">Default User
      </button>

        <label for="filterString" class="sr-only">Filter</label>
        <input type="text"
               id="filterString"
               name="filterString"
               placeholder="User filter string..."
               class="" [(ngModel)]="filterString">
    </mat-action-row>

    <mat-form-field>
      <mat-label>First name</mat-label>
      <input matInput>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Age</mat-label>
      <input matInput type="number" min="1">
    </mat-form-field>
    <mat-action-row>
      <button mat-button color="primary" (click)="setPanel(1)">Next</button>
    </mat-action-row>
  </mat-expansion-panel>


  <mat-expansion-panel [expanded]="panel === 1" (opened)="setPanel(1)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        API Calls
      </mat-panel-title>
      <mat-panel-description>
        Uncached API Calls
        <mat-icon>account_circle</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <span matBadge="{{userService.apiCalls}}" matBadgeOverlap="false">User</span>
    <span matBadge="{{followingsService.apiCalls}}" matBadgeOverlap="false">Followings</span>
    <span matBadge="{{followersService.apiCalls}}" matBadgeOverlap="false">Followers</span>
    <span matBadge="{{gistsService.apiCalls}}" matBadgeOverlap="false">Gists</span>
    <span matBadge="{{gistService.apiCalls}}" matBadgeOverlap="false">Gist</span>
  </mat-expansion-panel>


  <mat-expansion-panel [expanded]="panel === 2" (opened)="setPanel(2)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Caching
      </mat-panel-title>
      <mat-panel-description>
        Caching
        <mat-icon>account_circle</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-action-row>

      <mat-checkbox
        id="local-storage-caching"
        [(ngModel)]="userService.isCaching"
        (change)="changeCaching(userService.isCaching)">Local Storage Caching
      </mat-checkbox>

      <mat-checkbox
        id="cache-only"
        [(ngModel)]="userService.cacheOnly"
        (change)="changeCacheOnly(userService.cacheOnly)">Cache Only
      </mat-checkbox>

      <button
        class="mat-raised-button"
        (click)="clearCache()">Clear local storage cache
      </button>

    </mat-action-row>
  </mat-expansion-panel>

</mat-accordion>

<mat-divider [inset]="true"></mat-divider>

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-4 col-lg-4 col-xl-2">
      <user-detail [baseUsername]="baseUsername"
                   [cacheOnly]="cacheOnly"
                   [isCaching]="isCaching"
                   (notifySwitchToUser)='onSwitchToUser($event)'
                   (notifyMessage)='onMessage($event)'
      ></user-detail>
    </div>

    <div class="col-sm-4 col-lg-4 col-xl-2">
      <app-user-followers
        [baseUsername]="baseUsername"
        [filterString]="filterString"
        [cacheOnly]="cacheOnly"
        [isCaching]="isCaching"
        (notifySwitchToUser)='onSwitchToUser($event)'
        (notifyShowBaseUsername)='onShowUser($event)'
        (notifyMessage)='onMessage($event)'
      ></app-user-followers>
    </div>

    <div class="col-sm-4 col-lg-4 col-xl-2">
      <app-user-followings
        [baseUsername]="baseUsername"
        [filterString]="filterString"
        [cacheOnly]="cacheOnly"
        [isCaching]="isCaching"
        (notifySwitchToUser)='onSwitchToUser($event)'
        (notifyShowBaseUsername)='onShowUser($event)'
        (notifyMessage)='onMessage($event)'
      ></app-user-followings>
    </div>

    <div class="col-sm-6 col-lg-6 col-xl-3">
      <app-user-gists
        [baseUsername]="baseUsername"
        [cacheOnly]="cacheOnly"
        [isCaching]="isCaching"
        (notifyMessage)='onMessage($event)'
      ></app-user-gists>
    </div>

    <div class="col-sm-6 col-lg-6 col-xl-3">
      <app-gist
        [baseUsername]="baseUsername"
        [cacheOnly]="cacheOnly"
        [isCaching]="isCaching"
        (notifyMessage)='onMessage($event)'
      ></app-gist>
    </div>

  </div>
</div>
<!-- /container-fluid -->

<footer class="footer">
  <div class="container">

    <div class="row">

      <div class="col-3">
        <a class="" href="https://github.com/lasellers">https://github.com/lasellers</a>
      </div>
      <div class="col-3">
        <a class="" href="https://github.com/{{baseUsername}}">https://github.com/{{baseUsername}}</a>
      </div>
      <div class="col-6">
      </div>

    </div>

    <div class="muted-text">
      See README.md
    </div>

  </div>
</footer>
